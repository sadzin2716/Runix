-- 1. Biblioteca MaterialLua 
local Material = loadstring(game:HttpGet("https://raw.githubusercontent.com/Kinlei/MaterialLua/master/Module.lua"))()

-- 2. ServiÃ§os e variÃ¡veis
local Players, RunService, LocalPlayer = game:GetService("Players"), game:GetService("RunService"), game:GetService("Players").LocalPlayer
local Mouse = LocalPlayer:GetMouse()
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local camera = workspace.CurrentCamera
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualInputManager = game:GetService("VirtualInputManager")

local config = { espEnabled = true, enemyColor = Color3.fromRGB(255,0,0), teamColor = Color3.fromRGB(0,255,0) }
local hitboxConfig = { enabled = false, size = Vector3.new(7,7,7), normalSize = Vector3.new(2,2,1) }

-- ConfiguraÃ§Ã£o do Auto Farm
local autoFarmConfig = {
    enabled = false,
    autoShoot = false,
    wallbang = false,
    shootDelay = 0.05,
    teleportToPad = false,
    padPosition = CFrame.new(31.6, -114.5, 57.9)
}

-- 3. FunÃ§Ãµes ESP / Hitbox
local function updateAll()
    for _, pl in pairs(Players:GetPlayers()) do
        if pl ~= LocalPlayer and pl.Character then
            local hl = pl.Character:FindFirstChild("ESP_Highlight")
            if hl then
                local col = (pl.Team == LocalPlayer.Team) and config.teamColor or config.enemyColor
                hl.FillColor, hl.OutlineColor, hl.Enabled = col, col, config.espEnabled
            end
            local hrp = pl.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                if hitboxConfig.enabled and pl.Team ~= LocalPlayer.Team then
                    hrp.Size, hrp.Transparency, hrp.Material = hitboxConfig.size, 0.6, Enum.Material.ForceField
                else
                    hrp.Size, hrp.Transparency, hrp.Material = hitboxConfig.normalSize, 1, Enum.Material.Plastic
                end
                hrp.CanCollide = false
            end
        end
    end
end

local function tryCreateESP(pl, char)
    if char:FindFirstChild("ESP_Highlight") then return end
    local hl = Instance.new("Highlight", char)
    hl.Name, hl.FillTransparency, hl.OutlineTransparency = "ESP_Highlight", 0.5, 0
    hl.FillColor = (pl.Team == LocalPlayer.Team) and config.teamColor or config.enemyColor
    hl.OutlineColor = hl.FillColor
    hl.Enabled = config.espEnabled
end

local function applyToPlayer(pl)
    if pl == LocalPlayer then return end
    pl.CharacterAdded:Connect(function(char)
        repeat task.wait() until char:FindFirstChild("HumanoidRootPart")
        tryCreateESP(pl, char)
        updateAll()
    end)
    if pl.Character then
        tryCreateESP(pl, pl.Character)
        updateAll()
    end
end
for _, pl in pairs(Players:GetPlayers()) do applyToPlayer(pl) end
Players.PlayerAdded:Connect(applyToPlayer)
task.spawn(function() while true do if hitboxConfig.enabled then updateAll() end RunService.Heartbeat:Wait() end end)

-- 4. Aimbot com FOV e Lerp
local aiming = false
local aimbotFOV = 100

local function isAlive(plr)
    return plr.Character and plr.Character:FindFirstChild("Head") and plr.Character:FindFirstChild("Humanoid") and plr.Character.Humanoid.Health > 0
end

local function getClosestTarget()
    local closest, shortestDist = nil, math.huge
    local mousePos = Vector2.new(Mouse.X, Mouse.Y)
    for _, pl in pairs(Players:GetPlayers()) do
        if pl ~= LocalPlayer and isAlive(pl) then
            local headPos, onScreen = camera:WorldToViewportPoint(pl.Character.Head.Position)
            if onScreen then
                local screenPos = Vector2.new(headPos.X, headPos.Y)
                local dist = (mousePos - screenPos).Magnitude
                if dist < shortestDist and dist <= aimbotFOV then
                    shortestDist = dist
                    closest = pl
                end
            end
        end
    end
    return closest
end

local Drawing = Drawing
local fovCircle = Drawing.new("Circle")
fovCircle.Visible = false
fovCircle.Radius = aimbotFOV
fovCircle.Thickness = 2
fovCircle.Transparency = 0.5
fovCircle.Color = Color3.fromRGB(255, 255, 0)
fovCircle.Filled = false

RunService.RenderStepped:Connect(function()
    fovCircle.Position = Vector2.new(Mouse.X, Mouse.Y + 36)
    fovCircle.Radius = aimbotFOV
    fovCircle.Visible = aiming
end)

RunService.RenderStepped:Connect(function()
    if aiming then
        local target = getClosestTarget()
        if target and target.Character and target.Character:FindFirstChild("Head") then
            local cam = workspace.CurrentCamera
            local headPos = target.Character.Head.Position
            local camPos = cam.CFrame.Position
            local desiredCFrame = CFrame.new(camPos, headPos)
            cam.CFrame = cam.CFrame:Lerp(desiredCFrame, 0.15)
        end
    end
end)

-- 5. SISTEMA DE AUTO FARM - VERSÃƒO SIMPLIFICADA E FUNCIONAL

local function saveCurrentPosition()
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then 
        return false 
    end
    
    autoFarmConfig.padPosition = LocalPlayer.Character.HumanoidRootPart.CFrame
    local pos = autoFarmConfig.padPosition.Position
    print(string.format("[Auto Farm] âœ… PosiÃ§Ã£o salva: X: %.1f, Y: %.1f, Z: %.1f", pos.X, pos.Y, pos.Z))
    return true
end

local function teleportToPad()
    if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then 
        return false
    end
    
    if not autoFarmConfig.padPosition then
        print("[Auto Farm] âŒ ERRO: Nenhuma posiÃ§Ã£o configurada!")
        return false
    end
    
    LocalPlayer.Character.HumanoidRootPart.CFrame = autoFarmConfig.padPosition
    wait(0.3)
    return true
end

local function getEnemyPlayer()
    for _, pl in pairs(Players:GetPlayers()) do
        if pl ~= LocalPlayer and pl.Team ~= LocalPlayer.Team and isAlive(pl) then
            return pl
        end
    end
    return nil
end

-- FunÃ§Ã£o de tiro usando VirtualInputManager
local function shootClick()
    local screenSize = workspace.CurrentCamera.ViewportSize
    local x = screenSize.X / 2
    local y = screenSize.Y / 2
    
    VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 0)
    wait(0.05)
    VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 0)
end

-- Alternativa usando mouse1click se VirtualInputManager nÃ£o funcionar
local function shootClickAlt()
    mouse1click()
end

-- Loop de Auto Shoot
local shootingLoop = false
task.spawn(function()
    while true do
        wait(0.01)
        
        if autoFarmConfig.enabled and autoFarmConfig.autoShoot then
            local enemy = getEnemyPlayer()
            
            if enemy and isAlive(enemy) then
                local head = enemy.Character:FindFirstChild("Head")
                if head then
                    -- Mira na cabeÃ§a
                    local cam = workspace.CurrentCamera
                    cam.CFrame = CFrame.new(cam.CFrame.Position, head.Position)
                    
                    -- Atira
                    task.spawn(function()
                        local success, err = pcall(function()
                            mouse1press()
                            wait(0.03)
                            mouse1release()
                        end)
                        
                        if not success then
                            -- Se mouse1press nÃ£o funcionar, usa alternativa
                            pcall(shootClickAlt)
                        end
                    end)
                    
                    print("[Auto Farm] ğŸ¯ Atirando no inimigo!")
                end
            end
        end
    end
end)

-- Wallbang simplificado - sÃ³ desabilita colisÃ£o do personagem local
task.spawn(function()
    while true do
        wait(0.1)
        
        if autoFarmConfig.enabled and autoFarmConfig.wallbang then
            if LocalPlayer.Character then
                for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end
    end
end)

-- Loop de Teleporte
task.spawn(function()
    while true do
        wait(2)
        
        if autoFarmConfig.enabled and autoFarmConfig.teleportToPad then
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local myPos = LocalPlayer.Character.HumanoidRootPart.Position
                local padPos = autoFarmConfig.padPosition.Position
                local distance = (myPos - padPos).Magnitude
                
                -- SÃ³ teleporta se estiver longe
                if distance > 15 then
                    teleportToPad()
                    print("[Auto Farm] ğŸ“ Teleportado para o pad!")
                end
            end
        end
    end
end)

-- 6. GUI com MaterialLua
local themes = { "Dark", "Light", "Aqua", "Jester" }
local UI, PlayerTab, FarmTab

local function buildUI(theme)
    if UI then UI:Destroy() end
    UI = Material.Load({ Title="Runix Hub | MVSD", Style=1, SizeX=400, SizeY=450, Theme=theme or "Dark" })
    
    -- Aba Player
    PlayerTab = UI.New({ Title="Player" })
    PlayerTab.Toggle({ Text="Ativar ESP", Callback=function(s) config.espEnabled = s updateAll() end, Enabled=config.espEnabled })
    PlayerTab.Toggle({ Text="Hitbox Expandida (inimigos)", Callback=function(s) hitboxConfig.enabled = s updateAll() end, Enabled=hitboxConfig.enabled })
    PlayerTab.Toggle({ Text="Aimbot", Callback=function(s) aiming = s end, Enabled=aiming })

    PlayerTab.Slider({ Text="Tamanho Hitbox", Min=2, Max=15, Def=hitboxConfig.size.X,
        Callback=function(v) hitboxConfig.size = Vector3.new(v,v,v) updateAll() end })

    PlayerTab.Slider({ Text="Campo de VisÃ£o Aimbot", Min=20, Max=300, Def=aimbotFOV,
        Callback=function(v) aimbotFOV = v end })

    PlayerTab.Dropdown({
        Text="Tema da UI",
        Options=themes,
        Callback=function(sel)
            buildUI(sel)
        end
    })
    
    -- Aba Auto Farm
    FarmTab = UI.New({ Title="Auto Farm" })
    
    FarmTab.Button({
        Text="ğŸš€ Testar Teleporte para Pad",
        Callback=function()
            if teleportToPad() then
                print("[Auto Farm] âœ… Teleportado com sucesso!")
            else
                print("[Auto Farm] âŒ Erro ao teleportar!")
            end
        end
    })
    
    FarmTab.Button({
        Text="ğŸ“ Atualizar PosiÃ§Ã£o (onde estou agora)",
        Callback=function()
            if saveCurrentPosition() then
                print("[Auto Farm] âœ… Nova posiÃ§Ã£o salva!")
            else
                print("[Auto Farm] âŒ Erro ao salvar!")
            end
        end
    })
    
    FarmTab.Button({
        Text="ğŸ”« Testar Tiro Agora",
        Callback=function()
            print("[Auto Farm] ğŸ”« Testando sistema de tiro...")
            local enemy = getEnemyPlayer()
            if enemy then
                print("[Auto Farm] ğŸ¯ Inimigo detectado: " .. enemy.Name)
            else
                print("[Auto Farm] âŒ Nenhum inimigo encontrado!")
            end
        end
    })
    
    FarmTab.Toggle({ 
        Text="ğŸ”¥ ATIVAR AUTO FARM", 
        Callback=function(s) 
            autoFarmConfig.enabled = s 
            if s then
                print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
                print("    ğŸ”¥ AUTO FARM ATIVADO!")
                print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
                print("ğŸ“ PosiÃ§Ã£o: X: 31.6, Y: -114.5, Z: 57.9")
                print("ğŸ¯ Sistema de tiro: ATIVO")
                print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
            else
                print("[Auto Farm] âŒ Auto Farm DESATIVADO!")
            end
        end, 
        Enabled=autoFarmConfig.enabled 
    })
    
    FarmTab.Toggle({ 
        Text="ğŸ“ Auto Teleport para Pad", 
        Callback=function(s) 
            autoFarmConfig.teleportToPad = s 
            if s then
                print("[Auto Farm] âœ… Auto Teleport ATIVADO!")
            end
        end, 
        Enabled=autoFarmConfig.teleportToPad 
    })
    
    FarmTab.Toggle({ 
        Text="ğŸ¯ Auto Shoot (Atirar Automaticamente)", 
        Callback=function(s) 
            autoFarmConfig.autoShoot = s 
            if s then
                print("[Auto Farm] âœ… Auto Shoot ATIVADO!")
            else
                print("[Auto Farm] âŒ Auto Shoot DESATIVADO!")
            end
        end, 
        Enabled=autoFarmConfig.autoShoot 
    })
    
    FarmTab.Toggle({ 
        Text="ğŸ§± Wallbang (Sem ColisÃ£o)", 
        Callback=function(s) 
            autoFarmConfig.wallbang = s 
            if s then
                print("[Auto Farm] âœ… Wallbang ATIVADO - Seu personagem sem colisÃ£o!")
            end
        end, 
        Enabled=autoFarmConfig.wallbang 
    })

    UI.Init()
end

buildUI("Dark")

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("    ğŸ® RUNIX HUB - MVSD AUTO FARM v3")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… Script carregado!")
print("ğŸ“ Coordenadas: X: 31.6, Y: -114.5, Z: 57.9")
print("")
print("ğŸ”§ NOVA VERSÃƒO:")
print("âœ… Sistema de tiro reformulado")
print("âœ… Wallbang sÃ³ afeta seu personagem")
print("âœ… BotÃ£o de teste de tiro adicionado")
print("")
print("ğŸš€ COMO USAR:")
print("1ï¸âƒ£ Clique em 'ğŸ”« Testar Tiro Agora'")
print("2ï¸âƒ£ Ative 'ğŸ”¥ ATIVAR AUTO FARM'")
print("3ï¸âƒ£ Ative 'Auto Teleport' e 'Auto Shoot'")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
